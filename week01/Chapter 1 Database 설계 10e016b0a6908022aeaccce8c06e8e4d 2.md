# Chapter 1. Database 설계

- 외래키
    
    관계형 데이터베이스에서 두 테이블 간의 관계를 정의하는 키로, 한 테이블의 컬럼이 다른 테이블의 기본키나 고유 키를 참조할 때 사용한다. 데이터의 무결성을 유지하는 데 중요한 역할을 한다.
    
- 기본키
    
    관계형 데이터베이스에서 각 행을 고유하게 식별하기 위해 사용하는 하나 이상의 컬럼이다. 기본키는 테이블의 레코드를 식별하는 데 중요한 역할을 하며, 데이터의 무결성을 유지하는 데 필수적이다.
    
    기본키는 테이블 내에서 각 행을 고유하게 식별해야 하므로, 중복된 값이 들어갈 수 없고, NULL값을 허용하지 않는다. 또한 한 테이블에 하나만 존재한다.
    
- ER 다이어그램
    
    데이터베이스 설계에서 엔티티와 관계를 시각적으로 표현한 다이어그램이다. 주로 데이터베이스를 설계하거나 분석할 때 사용된다.
    
    주요 구성 요소로는 개체(Entity), 속성(Attribute), 관계(Relationship), 기수성(Cardinality), 기본키(Primary Key), 외래키(Foreign Key)가 있다.
    
    여기서 기수성이란 개체간의 관계에서 발생할 수 있는 인스턴스 수를 나타낸다.
    
- 복합 키
    
    두 개 이상의 컬럼을 결합하여 하나의 고유한 기본키로 사용하는 키를 말한다. 즉, 단일 컬럼으로는 고유성을 보장할 수 없을 때, 두 개 이상의 컬럼을 조합해 각 행을 고유하게 식별하는 데 사용된다. 복합키는 데이터베이스에서 두 개 이상의 컬럼을 합쳐서 하나의 기본키처럼 사용해야할 때 유용하다.
    
    - 여러 컬럼으로 고유성 보장
    - 기본키 역할
    - 관계 설정
- 연관관계
    
    두 개 이상의 테이블이 서로 관련되어 있음을 나타내는 개념이다. 연관관계를 통해 테이블 간 상호작용을 표현하고, 데이터를 효과적으로 관리하고 조회할 수 있다. 
    
    테이블 간 관계를 명확히 정의함으로써 데이터 무결성을 유지하고, 데이터 간의 연결을 쉽게 할 수 있도록 한다.
    
    - 1:1 관계 : 한 테이블의 한 행이 다른 테이블의 한 행과만 연결되는 관계
    - One to Many : 한 테이블의 한 행이 다른 테이블의 여러 행과 연결되는 관계
    - Many to Many : 한 테이블의 여러 행이 다른 테이블의 여러 행과 연결될 수 있는 관계
    
    연관관계의 역할은 데이터 무결성 유지, 효율적인 데이터 조회, 비즈니스 로직 반영 등이 있다. 
    
- 정규화
    
    데이터의 중복을 최소화하고, 무결성을 유지하기 위해 데이터베이스의 테이블을 구조적으로 조직하는 과정을 말한다.
    
    정규화는 여러 단계로 이루어지며,
    
    1. 제 1 정규형 (1NF)
        - 원자성 : 테이블의 모든 컬럼은 더 이상 분해할 수 없는 원자값이어야 한다.
    2. 제 2 정규형 (2NF)
        - 부분 함수 종속성 제거 : 1NF를 만족하면서, 기본키가 복합키일 경우 기본키의 일부에만 종속되는 컬럼을 분리. 즉, 복합키가 사용되는 테이블에서 일부 컬럼이 기본키의 일부에만 종속되는 경우, 해당 컬럼을 분리해 별도의 테이블로 만들어야 한다.
    3. 제 3 정규형 (3NF)
        - 이행적 함수 종속성 제거 : 2NF를 만족하면서, 기본키가 아닌 다른 속성들 간에 종속성이 있으면 안된다. 즉, 기본키가 아닌 컬럼이 다른 컬럼에 종속되는 경우, 해당 컬럼을 분리해 별도의 테이블로 만들어야 한다.
    
    장점
    
    - 데이터 중복 감소 : 동일한 데이터를 여러 테이블에 저장할 필요가 없으므로 중복을 줄일 수 있다.
    - 데이터 무결성 유지 : 데이터 갱신, 삭제 삽입 시 일관성을 유지할 수 있다.
    
    단점
    
    - 성능 저하 : 너무 높은 수준으로 정규화를 진행하면, 많은 테이블 간 조인이 필요해져 성능이 저하될 수 있다.
    
    [정보처리 실기_데이터베이스06강_정규화](https://youtu.be/RXQ1kZ_JHqg?si=f0OPsoOWnJXSbqca)
    
- 반 정규화
    
    정규화된 데이터베이스 구조를 성능 개선을 위해 의도적으로 일부 정규화 규칙을 깨는 과정을 의미한다. 데이터 중복을 허용하거나, 테이블을 통합하여 데이터를 더 쉽게 조회하거나 처리할 수 있도록 하는 기법이다. 
    
    정규화를 통해 데이터의 무결성을 유지할 수 있지만, 지나친 정규화는 복잡한 JOIN연산을 유발하여 성능 저하를 초래할 수 있다. 반정규화는 이러한 성능 문제를 해결하기 위한 방법이다.
    
    - 데이터베이스 성능 최적화
    - 응답시간 단축
    - 시스템 부하 감소

## ✅ 실습

![image.png](Chapter%201%20Database%20%E1%84%89%E1%85%A5%E1%86%AF%E1%84%80%E1%85%A8%2010e016b0a6908022aeaccce8c06e8e4d/image.png)

## ✅ 미션

![image.png](Chapter%201%20Database%20%E1%84%89%E1%85%A5%E1%86%AF%E1%84%80%E1%85%A8%2010e016b0a6908022aeaccce8c06e8e4d/image%201.png)

1. User : 사용자 정보와 회원가입, 로그인 관련 데이터 관리
    - `UserID (PK)`: 사용자의 고유 식별자
    - `이름`: 사용자 이름
    - `생년월일`: 사용자의 생년월일
    - `성별`: 남/여/선택 안 함
    - `주소`: 사용자의 주소 정보
    - `포인트`: 사용자의 누적 포인트
2. Food : 제공할 음식 종류 저장
3. User_Food: 사용자와 음식 간 다대다 관리하는 매핑, 하나의 사용자는 여러 음식 선호 가능, 하나의 음식도 여러 사용자 선호 가능, 따라서 중간테이블 만듦
4. Mission: 사용자가 수행할 미션에 대한 정보 관리
    - `MissionID (PK)`: 미션의 고유 식별자
    - `MissionName`: 미션의 이름
    - `MissionAuthNumber`: 미션인증번호
    - `미션설명`: 미션의 상세 설명
    - `Status`: 미션의 현재 상태 (진행 중/완료)
    - `Reward Point`: 미션을 완료했을 때 받는 포인트
    - `Region`: 미션이 적용되는 지역
    - `UserID (FK)`: 미션을 수행 중인 사용자와의 관계
5. MissionPerformance:사용자가 미션을 수행한 기록 저장
    - `PerformanceID (PK)`: 수행 기록의 고유 식별자
    - `UserID (FK)`: 미션을 수행한 사용자와의 관계
    - `MissionID (FK)`: 수행한 미션과의 관계
    - `StoreID (FK)`: 미션을 수행한 가게와의 관계
    - `수행 날짜`: 미션을 완료한 날짜
    - `RewardStatus`: 리뷰 작성 여부
6. Store: 사용자가 미션을 수행하는 장소인 가게 정보 관리
    - `StoreID (PK)`: 가게의 고유 식별자
    - `StoreName`: 가게 이름
    - `Address`: 가게의 주소 정보
    - `PhoneNumber`: 가게의 전화번호
    - `가게 설명`: 가게에 대한 간단한 설명

![image.png](Chapter%201%20Database%20%E1%84%89%E1%85%A5%E1%86%AF%E1%84%80%E1%85%A8%2010e016b0a6908022aeaccce8c06e8e4d/image%202.png)